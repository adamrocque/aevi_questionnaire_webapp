<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <body>
    
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init(elems);
      
      // Get the button element and the input element for postal code
      document.getElementById("result-btn").addEventListener("click", collectData);

    });

    function collectData(){
      console.log("About to pull all inputs")

      var formResponses = document.querySelectorAll("input");
      var parsedResponses = {}

      var businessName = ""
      var email = ""

      if (formResponses){
        for (var i = 0; i < formResponses.length; i++){
          if (formResponses[i].type == "radio" & formResponses[i].checked == true){
            parsedResponses[formResponses[i].name] = formResponses[i].value
          }
          if (formResponses[i].name == "business"){
            businessName = formResponses[i].value

          }
          if (formResponses[i].name == "email"){
            email = formResponses[i].value
          }
        }
      }
      console.log("Sending the following data:")
      console.log(parsedResponses)
      google.script.run.processForm(parsedResponses, businessName, email);
    }

  </script>
</html>
